<!DOCTYPE html>
<html>
<head lang="en">
   <meta charset="utf-8">
   <title>Docker, Compose & JS Apps</title>
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <link rel="stylesheet" href="/vendor/reveal.js/css/reveal.css">
   <link rel="stylesheet" href="/vendor/reveal.js/css/theme/league.css" id="theme">
   <link rel="stylesheet" href="/css/app.css">
</head>
<body>
<div class="reveal">
   <div class="slides">
      <section>
         <h1>Docker & Compose</h1>

         <h3>Running JS applications in a clean environment</h3>

         <p>
            <small>By <a href="http://www.sylvaincau.com" target="_blank">Sylvain CAU</a></small>
         </p>
      </section>

      <section>
         <h2>About me</h2>

         <div style="display: inline-block; margin-right: 50px; position: relative; top: -50px;">
            <h3>Sylvain CAU</h3>

            <p>Tech Lead Front End</p>

            <p>
               <small><img src="/img/twitter.png" style="width: 40px; height: 40px; margin: -5px 0 0 0"/> <a
                     href="https://twitter.com/SylvainCau" target="_blank">@SylvainCau</a></small>
            </p>
         </div>
         <div style="display: inline-block; width: calc(40% - 100px);">
            <img class="circular" src="/img/me.jpg" width="100%"/>
         </div>
      </section>

      <section>
         <section>
            <h2>What is Docker?</h2>

            <p class="fragment" data-fragment-index="1">
               A big, fat & angry whale with little boxes on it.
               <img src="/img/docker-monstro.png" alt=""/>
            </p>
         </section>
         <section>
            <h3>History</h3>

            <p>Created by Solomon Hykes</p>
            <ul>
               <li>March 2013 : Initial release</li>
               <li>April 2015 : Last stable release (1.6.0)</li>
            </ul>
         </section>
      </section>

      <section>
         <section>
            <h2>How it works?</h2>

            <p class="fragment" data-fragment-index="1">Based on LXC technology</p>

            <aside class="notes">
               LXC (Linux Containers) is an operating-system-level virtualization environment for running multiple isolated Linux systems (containers) on a single Linux control host.
            </aside>
         </section>
         <section>
            <h3>How is this different from virtual machines?</h3>

            <div class="fragment" data-fragment-index="1">

               <div style="display: inline-block; width: 40%;">
                  <img src="/img/what-is-vm-diagram.png" style="width: 90%;"/>
                  Virtual Machines
               </div>
               <div style="display: inline-block; width: 40%;">
                  <img src="/img/what-is-docker-diagram.png" style="width: 90%;"/>
                  Containers
               </div>
            </div>
         </section>
         <section>
            <h3>Containers construction</h3>

            <p class="fragment" data-fragment-index="1"></p>
            <!--<p class="fragment" data-fragment-index="2"><img src="/img/docker-filesystems-multilayer.png" style="width: 50%;"/></p>-->
            <p class="fragment" data-fragment-index="1"><img src="/img/what_is_layered_filesystems_sm.png" style="width: 50%;"/></p>
         </section>
      </section>
      <section>
         <section>
            <h2>Let's run some commands</h2>

            <h3>Images</h3>
            <pre class="fragment" data-fragment-index="1"><code data-trim>$ docker pull ashdev/docker-spigot</code></pre>

            <pre class="fragment" data-fragment-index="2"><code data-trim>$ docker images </code></pre>
         </section>
         <section>
            <h3>Running</h3>

            <pre class="fragment" data-fragment-index="1"><code data-trim>$ docker run -d -it
            --name=minecraft
            -p 25565:25565
            -p 8123:8123
            -v /var/minecraft:/home/spigot
            -e PVP=false
            ashdev/docker-spigot</code></pre>

            <pre class="fragment" data-fragment-index="2"><code data-trim>$ docker run -d --link minecraft:minecraft --name=nginx nginx</code></pre>

            <pre class="fragment" data-fragment-index="3"><code data-trim>$ docker ps
<small>CONTAINER ID   IMAGE                 COMMAND              CREATED     STATUS      PORTS                          NAMES
ac52abec9473   root/docker-nginx     "/bin/bash /etc/ngin 13 days ago Up 13 days  0.0.0.0:80->80/tcp             nginx
17575849e34c   ashdev/docker-spigot  "/bin/sh -c /spigot_ 13 days ago Up 13 days  0.0.0.0:8123->8123/tcp, (...)  minecraft</small></code></pre>
         </section>
         <section>
            <h3>Logs / Exec</h3>

            <pre class="fragment" data-fragment-index="1"><code data-trim>$ docker logs minecraft</code></pre>

            <pre class="fragment" data-fragment-index="2"><code data-trim>$ docker exec -it minecraft bash</code></pre>
         </section>
      </section>
      <section>
         <section>
            <h2>Build your own with Dockerfile</h2>
            <p class="fragment" data-fragment-index="1">Sample of Dockerfile</p>
            <pre class="fragment" data-fragment-index="1"><code data-trim>FROM google/nodejs
MAINTAINER AshDev &lt;ashdevfr@gmail.com&gt;
WORKDIR /home/workspace

RUN npm install -g gulp bower

ADD package.json /home/workspace/
ADD bower.json /home/workspace/
ADD Gulpfile.js /home/workspace/
ADD src /home/workspace/

RUN npm install
RUN bower install --config.interactive=false --allow-root

EXPOSE 9000
VOLUME /home/workspace/
CMD ["npm", "start"]</code></pre>
         </section>
         <section>
            <section>
               <h3>Build it</h3>

               <pre class="fragment" data-fragment-index="1"><code data-trim>$ cd /wherever-your-dockerfile-is/</code></pre>

               <pre class="fragment" data-fragment-index="2"><code data-trim>$ docker build --force-rm=true --tag="$USER/node-server:latest" .</code></pre>

               <pre class="fragment" data-fragment-index="3"><code data-trim>$ docker run -d -it
                  --name=nodeserver
                  -p 9000:9000
                  $USER/node-server</code></pre>
            </section>
         </section>
      </section>
      <section>
         <section>
            <h2>The Compose's way</h2>

            <p class="fragment" data-fragment-index="1">Sample of docker-compose.yml</p>
            <pre class="fragment" data-fragment-index="1"><code data-trim>web:
   build: .
   links:
   - db
   ports:
   - "9000:9000"
   environment:
      NODE_ENV: development
      PORT: 9000
db:
   image: mongo:latest
   ports:
   - "27017:27017"</code></pre>

         </section>
         <section>
            <section>
               <h3>Run it</h3>

               <pre class="fragment" data-fragment-index="1"><code data-trim>$ cd /wherever-your-compose-file-is/</code></pre>

               <pre class="fragment" data-fragment-index="2"><code data-trim>$ docker-compose up</code></pre>
            </section>
         </section>
      </section>
      <section>
         <section>
            <h2>Questions ?</h2>
            <img src="/img/whale.gif" alt=""/>
         </section>
         <section>
            <section>
               <h3></h3>

               <p></p>
            </section>
         </section>
      </section>
   </div>
</div>
<script src="/vendor/reveal.js/js/reveal.js"></script>
<script src="/js/app.js"></script>
</body>
</html>
